# Redis-tutorials

此 markdown 用来记录redis 的常见用法和内部实现原理

## 

## 实现原理

1.SDS 存储字符串型数据

组成：free + len + buf[]

优势：1）预分配内存（增加string时次数大大减少）+ 惰性空间释放(缩短 string 时次数大大减少)

​	   2）不会像 C 一样造成缓冲区溢出和内存溢出。

​           3)  strlen() 复杂度为 O(1)

​           4)  结尾仍像 C 字符串一样用 ‘\0’ 结尾，所以可以兼容一些老的 C 字符串处理函数

备注：buf[] 存的是二进制的字节数组，因此是二进制安全的。C 字符串就是字符数组。

| 函数        | 作用                                                         | 时间复杂度O                             |
| ----------- | ------------------------------------------------------------ | --------------------------------------- |
| sdsnew      | 创建一个包含给定 C 字符串的 SDS                              | O(n)，n为给定 C 字符串的长度            |
| sdsempty    | 创建一个不包含任何内容的空 SDS                               | O(1)                                    |
| sdsfree     | 释放给定的 SDS                                               | O(n)                                    |
| sdslen      | 返回 SDS 的已使用存储空间的字节数                            | O(1)                                    |
| sdsavail    | 返回 SDS 的未使用存储空间的字节数                            | O(1)                                    |
| sdsdup      | 创建一个给定的 SDS 的副本                                    | O(n)                                    |
| sdsclear    | 清空 SDS 所保存的字符串内容                                  | 采用的是惰性空间释放策略，O(1)          |
| sdscat      | 将给定的 C 字符串拼接到 SDS 字符串尾                         | O(n)，n 为 C 字符串的长度               |
| sdscatsds   | 将给定的 SDS 字符串拼接到另一 SDS 字符串尾                   | O(n)，n 为要拼接加上的 SDS 字符串的长度 |
| sdscpy      | 将给定的 C 字符串复制到 SDS 里面，覆盖 SDS 原有的字符串      | O(n)                                    |
| sdsgrowzero | 用空字符将 SDS 扩展到指定宽度                                | O(n)， n 为扩展操作新增的字节数         |
| sdsrange    | 保留 SDS 给定区间内的数据，不在区间内的数据会被覆盖或清除    | O(n)， n 为将要保留的字节数             |
| sdstrim     | 接收一个 SDS 和 C 字符串作为参数，从 SDS 中移除所有在 C 字符串中出现的字符。 | O(n^2)，n 为给定的 C 字符串的长度       |
| sdscmp      | 对比两个SDS字符串是否相等                                    | O(n)，n 为两个 SDS 中较短一个的长度     |

2.redis 链表实现

